"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3142],{49803:function(e,t,n){n.d(t,{Gs:function(){return l},Ni:function(){return s},Ox:function(){return a},a3:function(){return c}});var o=n(64426),r=n(77103),i=n(15890);let a=async(e,t)=>{let n=(0,i.B5)(new URL("".concat(r.publicRuntimeConfig.apiUrl,"user/favorites")),e),a=await (0,o.BB)({url:n,options:{method:"GET",credentials:"same-origin",headers:{authorization:"Token ".concat(t),"Content-Type":"application/json"}}});return await a.json()},c=async(e,t,n)=>u(e,t,n,"POST"),s=async(e,t,n)=>u(e,t,n,"DELETE"),u=async(e,t,n,r)=>{let i=await (0,o.BB)({url:d("user/favorites",t),options:{method:r,body:"gif_id=".concat(e),headers:{cookie:n,Accept:"application/json",Authorization:"Token ".concat(t),"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"}}});return await i.json()},l=async(e,t)=>{let n=await (0,o.BB)({url:d("user/favorites/statuses",t),options:{method:"POST",headers:{Authorization:"Token ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({gif_ids:[e]})}});return(await n.json()).data.length>0};function d(e,t){return(0,i.B5)(new URL("".concat(r.publicRuntimeConfig.apiUrl).concat(e)),{api_key:r.publicRuntimeConfig.apiKey,access_token:t})}},68774:function(e,t,n){var o=n(27573),r=n(77103),i=n(39712),a=n(12235),c=n(7653),s=n(66845),u=n(94657),l=n(45151);let d=()=>((0,l.t)(),null);t.default=e=>{let{children:t,takeover:n,channel:l}=e,{deviceType:f}=(0,c.useContext)(u.Z);return(0,o.jsx)(a.d,{channel:l,children:(0,o.jsxs)(i.b.Provider,{value:{takeover:n},children:[(0,o.jsx)(d,{}),(0,o.jsx)(s.Z,{apiKey:"mobile"===f?r.publicRuntimeConfig.mobileApiKey:r.publicRuntimeConfig.apiKey,children:t})]})})}},88397:function(e,t,n){n.d(t,{C:function(){return s}});var o=n(27573),r=n(67754),i=n(26863),a=n(7653);let c="39588136",s={c1:"2",c2:c,options:{enableFirstPartyCookie:!0}};t.default=function(){let e=(0,r.usePathname)(),t=(0,a.useRef)(e);return(0,a.useEffect)(()=>{var n;t.current!==e&&(t.current="",(null===(n=window.COMSCORE)||void 0===n?void 0:n.beacon)&&(console.log("comscore beacon for ",e),window.COMSCORE.beacon(s),fetch("/comscore-page-view")))},[e]),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(i.default,{id:"comscore",strategy:"beforeInteractive",children:"\n                var _comscore = _comscore || []; _comscore.push(".concat(JSON.stringify(s),');\n                (function() {\n                    var s = document.createElement("script"), el = document.getElementsByTagName("script")[0]; s.async = true; s.src = "https://sb.scorecardresearch.com/cs/').concat(c,'/beacon.js";\n                    el.parentNode.insertBefore(s, el);\n                })();')})})}},26657:function(e,t,n){n.r(t),n.d(t,{DESKTOP_AD_DIMENSIONS:function(){return p},DESKTOP_CONTAINER_HEIGHT:function(){return d},MOBILE_AD_DIMENSIONS:function(){return h},MOBILE_CONTAINER_HEIGHT:function(){return f},UNIT_NAME:function(){return g}});var o=n(27573),r=n(14882),i=n(94657),a=n(93887),c=n(7653),s=n(63400),u=n(96692),l=n(30993);let d=120,f=70,p=[728,90],h=[320,50],g="top_leaderboard",v=s.ZP.div.withConfig({componentId:"sc-3bc9a9ea-0"})(["position:sticky;top:0;z-index:",";display:flex;flex-wrap:wrap;justify-content:center;align-items:center;background-color:",";height:","px;",""],u.yV+1,a.n7,f,(0,l.gv)((0,s.iv)(["height:","px;"],d))),x=s.ZP.div.withConfig({componentId:"sc-3bc9a9ea-1"})(["background-color:",";width:","px;height:","px;border-radius:4px;overflow:hidden;",""],a.s$,h[0],h[1],(0,l.gv)((0,s.iv)(["width:","px;height:","px;"],p[0],p[1])));t.default=()=>{let{deviceType:e}=(0,c.useContext)(i.Z),{isAdUnitEnabled:t,pageName:n}=(0,c.useContext)(r.Z),a="htlad-".concat(e,"_").concat(g,"_").concat(n);return t(g)&&(0,o.jsx)(v,{children:(0,o.jsx)(x,{children:(0,o.jsx)("div",{className:a})})})}},92095:function(e,t,n){var o=n(27573),r=n(88397),i=n(42054),a=n(20582),c=n(67754),s=n(7653),u=n(3527),l=n(63400),d=n(96692),f=n(30993),p=n(94657),h=n(15890),g=n(6165),v=n(7762);let x=(0,a.default)(()=>Promise.all([n.e(6275),n.e(7031),n.e(3920),n.e(5876),n.e(2104),n.e(3348),n.e(8232),n.e(3856),n.e(1841),n.e(3038)]).then(n.bind(n,13038)),{loadableGenerated:{webpack:()=>[13038]},ssr:!1}),m=(0,s.createContext)({gifs:[],setGifs:()=>{}}),b=l.ZP.p.withConfig({componentId:"sc-687ee1cc-0"})(["text-align:center;padding:10px;"]);t.Z=e=>{let{initialGifs:t,fetchGifs:n,gaTrackingUrl:a,width:l,columns:w,columnOffsets:C,onGifClick:E,overlay:y,noShowMessage:k}=e,[S,_]=(0,s.useState)(!0),j=(0,c.useRouter)(),[T,N]=(0,s.useState)(),[P,I]=(0,s.useState)(0);(0,v.$)(a,P);let{deviceType:O}=(0,s.useContext)(p.Z),{width:Z}=(0,u.Z)(),L=(0,g.Z)(),R="desktop"===O;L&&(R=Z>=f.gv.breakpointWidth);let A=(0,s.useMemo)(()=>L?{rootMargin:"0px 0px 250px 0px"}:void 0,[L]),G=(0,s.useMemo)(()=>({gifs:T,setGifs:N}),[T,N]);return S?R||A?(0,o.jsx)(m.Provider,{value:G,children:(0,o.jsx)(i.Grid,{columns:w||(R?4:2),width:l||(R?d.VC:Z),fetchGifs:async e=>{var o;let i=await n(e);return(null===(o=window.COMSCORE)||void 0===o?void 0:o.beacon)&&(window.COMSCORE.beacon(r.C),fetch("/comscore-page-view")),0===i.data.length&&(null==t?void 0:t.length)===0&&_(!1),i},externalGifs:T,initialGifs:t,onGifClick:(e,t)=>{E?E(e,t):(t.preventDefault(),t.stopPropagation(),j.push((0,h.Hn)(e.url)))},gutter:R?12:void 0,overlay:y||(R?x:void 0),hideAttribution:!0,loaderConfig:A,onGifsFetched:e=>{I(e.length),N(e)},columnOffsets:C})}):null:k?(0,o.jsx)(b,{children:k}):null}},7762:function(e,t,n){n.d(t,{$:function(){return i}});var o=n(7653),r=n(45151);function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,[i,a]=(0,o.useState)([0,1]);(0,o.useEffect)(()=>{let o=Math.floor(t/n)+1;!i.includes(o)&&(a([...i,o]),e&&(0,r.Z)(e(o)))},[e,t,i,n])}},66845:function(e,t,n){n.d(t,{x:function(){return G},Z:function(){return M}});var o=n(27573);let r=RegExp(["gif","gifs","sticker","stickers","video","videos","transparent","clips"].map(e=>"\\b(".concat(e,")\\b")).join("|"),"gi"),i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(r,"").trim()};var a=n(67754),c=n(37800);let s=e=>{var t;let n=(0,c.eC)(e),o=(t=n).endsWith("-stickers")?"stickers":t.endsWith("-clips")?"clips":"gifs";return[n=i(n).replaceAll("-"," ").trim(),o]};var u=n(26657),l=n(39712),d=n(14882),f=n(72497),p=n(59752),h=n(93887),g=n(42054),v=n(20582),x=n(7653),m=n(63400),b=n(14268),w=n(33034),C=n(96692),E=n(30993),y=n(15644),k=n(93782),S=n.n(k),_=n(77103),j=n(90526),T=e=>{let{takeover:t}=e,{host:n,pathname:r}=new URL(t.img_src),i="giphy.com"===n?"".concat(_.xj).concat(r):t.img_src;return(0,o.jsx)("a",{href:t.href,target:"_blank",style:{top:10,right:68},className:"absolute hidden cursor-pointer md:block",onClick:()=>{(0,j.u2)({event:"ad_banner_clicked",options:{banner:{bannerName:"searchbar_takeover"}}})},children:(0,o.jsx)("img",{src:i,height:68,width:400,alt:"",onLoad:()=>{(0,j.u2)({event:"ad_banner_viewed",options:{banner:{bannerName:"searchbar_takeover"}}})}})})};let N=(0,v.default)(()=>Promise.all([n.e(7031),n.e(5469),n.e(6575),n.e(3835),n.e(3293)]).then(n.bind(n,83293)),{loadableGenerated:{webpack:()=>[83293]}}),P=(0,v.default)(()=>n.e(1959).then(n.bind(n,51959)),{loadableGenerated:{webpack:()=>[51959]}}),I=(0,v.default)(()=>n.e(5759).then(n.bind(n,95759)),{loadableGenerated:{webpack:()=>[95759]}}),O=(0,m.ZP)(g.SearchBar).withConfig({componentId:"sc-b07ab830-0"})(["input{font-size:22px;padding-left:14px;font-family:",";","}"," .giphy-search-bar-cancel{width:22px;height:22px;margin-right:10px;","}"],S().style.fontFamily,e=>e.$hasTakeover&&(0,m.iv)(["width:","px;flex:unset;"],e.$isStuck?360:540),e=>e.$hasTakeover&&(0,m.iv)(["justify-content:space-between;"]),e=>e.$hasTakeover&&(0,m.iv)(["position:absolute;left:","px;margin:0;"],540)),Z=m.ZP.div.withConfig({componentId:"sc-b07ab830-1"})(["display:none;"," ",""],(0,E.gv)((0,m.iv)(["top:0;display:block;position:absolute;height:","px;display:flex;align-items:center;z-index:",";"],68,C.yV)),e=>{let{$isStuck:t,$hasTopLeaderboardAd:n}=e;return t&&(0,E.gv)((0,m.iv)(["position:fixed;top:","px;transform:translate3d(0,78px,0);transition:transform 0.5s cubic-bezier(0.165,0.84,0.44,1) 0.3s;"],n?u.DESKTOP_CONTAINER_HEIGHT-70:-70))}),L=m.ZP.div.withConfig({componentId:"sc-b07ab830-2"})(["padding:5px 0;",""],(0,E.gv)((0,m.iv)(["padding:","px 0 0;"],10))),R=m.ZP.div.withConfig({componentId:"sc-b07ab830-3"})(["background-color:",";width:100%;z-index:",";position:sticky;top:-1px;"," ",""],h.eF,C.u0,e=>{let{$hasTopLeaderboardAd:t}=e;return t&&"top: ".concat(u.MOBILE_CONTAINER_HEIGHT-1,"px;")},e=>{let{$hasTopLeaderboardAd:t}=e;return t&&(0,E.gv)((0,m.iv)(["top:","px;"],u.DESKTOP_CONTAINER_HEIGHT-1))}),A=m.ZP.div.withConfig({componentId:"sc-b07ab830-4"})(["width:100%;"," ",""],(0,E.gv)((0,m.iv)(["transition:width 0.3s cubic-bezier(0.165,0.84,0.44,1) 0s;margin-left:auto;"])),e=>{let{$isStuck:t}=e;return t&&(0,E.gv)((0,m.iv)(["width:calc(100% - ","px);padding-bottom:8px;"],b.Gc))}),G=(0,x.createContext)({ignoreTarget:"",setIgnoreTarget:()=>{}}),B=e=>{let{isStuck:t}=e,{autoFocus:n}=(0,x.useContext)(p.z),{takeover:r}=(0,x.useContext)(l.b),[a,c]=(0,x.useState)(0),{activeChannel:s}=(0,x.useContext)(g.SearchContext),u=(0,x.useCallback)(e=>{if(e){let t=encodeURIComponent(i(e).replaceAll(" ","-").replace("/",""));if(s){let e="@".concat(s.slug.trim().toLowerCase());location.href="/search/?q=".concat(e,"+").concat(t)}else location.href="/search/".concat(t)}},[s]);return(0,x.useEffect)(()=>{let e=setTimeout(()=>c(0===a?1:0),3e3);return()=>clearTimeout(e)},[a]),(0,o.jsxs)(L,{children:[(0,o.jsx)(O,{$isStuck:t,$hasTakeover:!!r,placeholder:["Search all the GIFs and Stickers","@username to search channels"][a],onEnter:u,autoFocus:n}),r&&(0,o.jsx)(T,{takeover:r})]})},D=m.ZP.div.withConfig({componentId:"sc-b07ab830-5"})(["",""],(0,E.gv)((0,m.iv)(["position:relative;width:","px;margin:0 auto;"],C.VC)));var M=e=>{let{apiKey:t,children:n}=e,r=(0,a.useRouter)(),{user:i}=(0,x.useContext)(y.Z),{term:c=""}=(0,a.useParams)(),[l]=s(c),{favorites:p}=(0,x.useContext)(f.ZP),[h,v]=(0,x.useState)(""),m=(0,x.useRef)(null),[C,E]=(0,x.useState)(!1),{isAdUnitEnabled:k}=(0,x.useContext)(d.Z),S=k(u.UNIT_NAME);return(0,x.useEffect)(()=>{let e;return m.current&&(e=new IntersectionObserver(e=>{let[t]=e;E(t.intersectionRatio<1)},{threshold:[1],rootMargin:"".concat(S?-u.DESKTOP_CONTAINER_HEIGHT:0,"px 1000px 1000px 1000px")})).observe(m.current),()=>null==e?void 0:e.disconnect()},[S]),(0,o.jsxs)(D,{children:[(0,o.jsx)(G.Provider,{value:{setIgnoreTarget:v,ignoreTarget:h},children:(0,o.jsxs)(g.SearchContextManager,{initialTerm:l,apiKey:t,shouldFetchChannels:!1,theme:{searchbarHeight:68,mobileSearchbarHeight:68},children:[(0,o.jsx)(P,{}),(0,o.jsx)(b.ZP,{user:i,onLogoClick:()=>{r.push("/")},hasFavorites:p.length>0}),(0,o.jsx)(Z,{$hasTopLeaderboardAd:S,$isStuck:C,children:(0,o.jsx)(w.ZP,{})}),(0,o.jsx)(R,{$hasTopLeaderboardAd:S,ref:m,children:(0,o.jsxs)(A,{$isStuck:C,children:[(0,o.jsx)(B,{isStuck:C}),(0,o.jsx)(N,{isStuck:C})]})}),n]})}),(0,o.jsx)(I,{})]})}},39712:function(e,t,n){n.d(t,{b:function(){return o}});let o=(0,n(7653).createContext)({takeover:void 0})},14882:function(e,t,n){let o=(0,n(7653).createContext)({adsEnabled:!1,adUnits:[],isAdUnitEnabled:()=>!1,pageName:void 0});t.Z=o},12235:function(e,t,n){n.d(t,{d:function(){return i},g:function(){return r}});var o=n(27573);let r=(0,n(7653).createContext)({channel:void 0}),i=e=>{let{channel:t,children:n}=e;return(0,o.jsx)(r.Provider,{value:{channel:t},children:n})}},72497:function(e,t,n){n.d(t,{c5:function(){return u},k1:function(){return f},xL:function(){return d}});var o=n(27573),r=n(49803),i=n(7653),a=n(15644);let c=(0,i.createContext)({favorites:[],setFavorites:()=>{},hasChecked:[],setHasChecked:()=>{}}),s=e=>{let{user:t}=(0,i.useContext)(a.Z),n=(0,i.useState)([]),[o,r]=(0,i.useState)(!1),c=(0,i.useRef)(!1),[s,u]=n;return(0,i.useEffect)(()=>{if(t){if(!c.current){c.current=!0;let n=window.localStorage.getItem(e);l(n?JSON.parse(n):[],t,e)}}else if(o)try{window.localStorage.setItem(e,JSON.stringify(Array.from(new Set(s))))}catch(t){console.error("failed to set ".concat(e," in local"))}else try{let t=window.localStorage.getItem(e);u(t?JSON.parse(t):[]),r(!0)}catch(e){}},[o,e,u,s,t]),n},u=e=>{let{children:t}=e,[n,r]=s("local-favorites"),[a,u]=(0,i.useState)([]);return(0,i.useEffect)(()=>{},[]),(0,o.jsx)(c.Provider,{value:{favorites:n,setFavorites:r,hasChecked:a,setHasChecked:u},children:t})};async function l(e,t,n){let o=e[0];if(o)try{setTimeout(async()=>{await (0,r.a3)(o,t.token,document.cookie),window.localStorage.setItem(n,JSON.stringify(e.filter(e=>e!==o))),l(e.slice(1),t,n)},100)}catch(e){console.error("failed to sync favorite ".concat(o),e)}}function d(e){let{user:t}=(0,i.useContext)(a.Z),{favorites:n,setFavorites:o,hasChecked:s,setHasChecked:u}=(0,i.useContext)(c),l=(0,i.useRef)(!1);if((0,i.useEffect)(()=>{async function n(e){if(t){let n=await (0,r.Gs)(e,t.token);o(t=>{let o=t.includes(e);return n&&!o?[...t,e]:!n&&o?t.filter(t=>t!==e):t}),u(t=>[...t,e])}else console.error("no user in useFavorites hook")}!e||l.current||s.includes(e)||(l.current=!0,n(e))},[s,e,o,u,t]),e)return t?s.includes(e)?n.includes(e):void 0:n.includes(e)}function f(){let{user:e}=(0,i.useContext)(a.Z),{favorites:t,setFavorites:n}=(0,i.useContext)(c);return async function(o){let i=t.includes(o);if(e)return i?i&&(await (0,r.Ni)(o,e.token,document.cookie),n(e=>e.filter(e=>e!==o))):(await (0,r.a3)(o,e.token,document.cookie),n(e=>[...e,o])),!i;i?n(e=>e.filter(e=>e!==o)):n(e=>[...e,o])}}t.ZP=c},59752:function(e,t,n){n.d(t,{z:function(){return a}});var o=n(27573),r=n(94657),i=n(7653);let a=(0,i.createContext)({autoFocus:!1});t.Z=e=>{let{children:t}=e,{deviceType:n}=(0,i.useContext)(r.Z),[c,s]=(0,i.useState)("desktop"===n);(0,i.useEffect)(()=>{s(!1)},[]);let u=(0,i.useMemo)(()=>({autoFocus:c}),[c]);return(0,o.jsx)(a.Provider,{value:u,children:t})}},94657:function(e,t,n){let o=(0,n(7653).createContext)({deviceType:void 0});t.Z=o},15644:function(e,t,n){let o=(0,n(7653).createContext)({user:{},hasFetchedUser:!1});t.Z=o},45151:function(e,t,n){n.d(t,{Z:function(){return d},t:function(){return f}});var o=n(12235),r=n(94657),i=n(90526),a=n(7653),c=n(52531),s=n(15644);let u=window||{},l={ENABLED:u.DEBUG||u.location&&(0===location.href.indexOf("http://local.giphy.com")||-1!==location.search.indexOf("debug=true")),LEVEL:0,debug:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];l.ENABLED&&l.LEVEL<=0&&console.debug(...t)},info:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];l.ENABLED&&l.LEVEL<=1&&console.info(...t)},warn:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];l.ENABLED&&l.LEVEL<=2&&console.warn(...t)},error:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];l.ENABLED&&l.LEVEL<=3&&console.error(...t)}},d=e=>{e&&(l.debug("trackPageView virtualPageURL: ".concat(e)),window.didomiOnReady.push(()=>{l.debug("SEND: trackPageView virtualPageURL: ".concat(e)),window.dataLayer.push({event:"VirtualPageview",virtualPageURL:e,virtualPageName:e,...(0,i.yU)()})}))},f=()=>{let{channel:e}=(0,a.useContext)(o.g),{deviceType:t}=(0,a.useContext)(r.Z),n=(0,i.bM)(),[u,l]=(0,c.Z)("login_type",n.platform||"email"),{user:d,hasFetchedUser:f}=(0,a.useContext)(s.Z);(0,a.useEffect)(()=>{(0,i.wj)({creatorId:e?"".concat(e.id):void 0,creatorName:null==e?void 0:e.user.username})},[e]),(0,a.useEffect)(()=>{if(f){let o=(0,i.PR)();if(d){var e;o={userID:"".concat(d.id),userType:d.is_staff?"staff":d.user_type,loginMethod:n.platform||u,dashboardAnalytics:d.permissions.dashboard_analytics,verifiedStatus:d.is_verified,loggedInStatus:!0,userLanguage:null===(e=navigator)||void 0===e?void 0:e.language,siteType:t}}(0,i.av)(o),n.action&&(l(n.platform),(0,i.u2)({event:"".concat(n.action,"_form_success"),options:{form:{formName:n.action}}})),window.dataLayer=window.dataLayer||[],window.dataLayer.push((0,i.rD)())}},[f])}},15890:function(e,t,n){n.d(t,{B5:function(){return a},Hn:function(){return o},W5:function(){return u},dr:function(){return r},ej:function(){return i},oH:function(){return c},xl:function(){return s}});let o=e=>"/".concat(e.replace(/^(?:\/\/|[^\/]+)*\//,"")),r=(e,t)=>{t.preventDefault(),t.stopPropagation(),location.href=o(e.url)};function i(e,t){let n=(t||document.cookie).split(";");for(let t=0;t<n.length;t++){let o=n[t].trim();if(o.startsWith(e+"="))return o.substring(e.length+1)}return""}let a=(e,t)=>(Object.entries(t).forEach(t=>{let[n,o]=t;e.searchParams.append(n,o)}),e),c=e=>e.replace(/ /g,"-");function s(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{method:"POST",headers:{Accept:"application/json","Content-Type":t?"multipart/form-data":"application/json","X-CSRFToken":e,"X-Requested-With":"XMLHttpRequest",credentials:"same-origin"}}}let u=(e,t)=>{let{results:n=[]}=e,o=n.length;return{data:n,pagination:{count:o,total_count:1/0,offset:t},meta:{msg:"",response_id:"",status:200}}}},6165:function(e,t,n){var o=n(7653);t.Z=function(){let[e,t]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{t(!0)},[]),e}}}]);
//# sourceMappingURL=3142-2e47b0efeff5ad7b.js.map